/**
 * VisualHash
 *
 * @author Luis Couto
 * @organization 15minuteslate.net
 * @contact couto@15minuteslate.net
 * @version 0.0.1
 * @requires MD5
 *
 * @license 2012 - MIT (http://couto.mit-license.org/)
 */(function(a,b,c){function e(a,b){var c;if(!d.object(a)||!d.object(b)){throw new Error("Argument given must be of type Object")}for(c in b){if(b.hasOwnProperty(c)&&!a[c]){a[c]=b[c]}}return a}function f(a,b){var e,f,g,h=Array.prototype.slice;if(d.string(b)){e=a[b];b=a;a=e}if(!d.func(a)){return c}f=h.call(arguments,2);g=function(){return a.apply(b,f.concat(h.call(arguments)))};return g}function g(a,b,c){if(!d.element(a)){throw new Error("addEvent requires elm parameter to be a DOM Element")}if(!d.string(b)){throw new Error("addEvent requires evTtype parameter to be a String")}if(!d.func(c)){throw new Error("addEvent requires evTtype parameter to be a Function")}if(a.addEventListener){a.addEventListener(b,c)}else if(a.attachEvent){a.attachEvent("on"+b)}else{a["on"+b]=c}}function h(a,b,c){if(!d.element(a)){throw new Error("removeEvent requires elm parameter to be a DOM Element")}if(!d.string(b)){throw new Error("removeEvent requires evTtype parameter to be a String")}if(!d.func(c)){throw new Error("removeEvent requires evTtype parameter to be a Function")}if(a.removeEventListener){a.removeEventListener(b,c)}else if(a.detachEvent){a.detachEvent("on"+b,c)}else{a["on"+b]=null}}function i(a,b){var c=a.length-1;if(Array.prototype.indexOf){return a.indexOf(b)}for(c;c>=0;c-=1){if(a[c]===b){return c}}return-1}function j(a,c){if(!(this instanceof j)){return new j(a,c)}if(!a||!d.element(a)){throw new Error("VisualHash constructor needs at least one argument and has to be a DOM element")}if(c&&!d.object(c)){throw new Error("VisualHash requires the options parameter to be of type object")}this.inputEl=a;this.options=c?e(c,this.defaults):this.defaults;this.container=b.createElement("div");this.container.setAttribute("class",this.options.className);this.stripes=function(a,c,d){var e,f=[];while(c){e=b.createElement("div");e.setAttribute("class",d+" stripe-"+c);f.push(e);a.appendChild(e);c-=1}return f}(this.container,this.options.stripes,this.options.stripesClass);this.inputHandler=f(this.inputHandler,this);g(this.inputEl,"input",this.inputHandler);if(this.options.appendTo){this.append()}}var d={tester:Object.prototype.toString,func:function(a){return this.tester.call(a)==="[object Function]"},string:function(a){return this.tester.call(a)==="[object String]"},element:function(a){return!!(a&&a.nodeType===1)},object:function(a){return a===new Object(a)},array:function(a){return this.tester.call(a)==="[object Array]"},number:function(a){return this.tester.call(a)==="[object Number]"}};"use strict";j.prototype={constructor:j,defaults:{stripes:3,appendTo:b.body,className:"visual-hasher",stripesClass:"visual-hasher-stripe"},toHash:function(a){var b="",c=0,e=function(a){return Number(parseInt(a,16)*12345).toString(16)};if(!d.string(a)){throw new Error("toHash function must be called with a parameter of type String")}b+=e(a);while(b.length<40){b+=e(""+b.charCodeAt(c)*Math.floor(b.length/3));c+=1}return b},split:function(a,b,c){var e=[],f=0,g=b,h=b;if(!d.string(a)){throw new Error("split function must be called with str parameter being of type String")}if(!d.number(b)){throw new Error("split function must be called with size parameter being of type Number")}if(!d.number(c)){throw new Error("split function must be called with chunks parameter being of type Number")}while(c){e.push(a.substring(f,g));f=g+1;g=g+h+1;c-=1}return e},fillColors:function(a,b){var c,e=a.length-1,f="",g=[],h=0;if(!d.array(a)){throw new Error("fillColors function must be called with elements parameter being of type Array or Static Node")}if(!d.array(b)){throw new Error("fillColors function must be called with colors parameter being of type Array")}for(e;e>=0;e-=1){c=a[e];f=c.getAttribute("style");if(f){g=f.split(/(\;|:)/gi);h=i(g,"background-color");if(h!==-1){g[h+2]="#"+b[e]}else{g[g.length]=";background-color: #"+b[e]+";"}c.setAttribute("style",g.join(""))}else{c.setAttribute("style","background-color: #"+b[e]+";")}}return this},clearColors:function(a){var b,c=a.length-1,e="",f=[],g=0;if(!d.array(a)){throw new Error("clearColors function must be called with elements parameter being of type Array or Static Node")}for(c;c>=0;c-=1){b=a[c];e=b.getAttribute("style");if(e){f=e.split(/(\;|:)/gi);g=i(f,"background-color");if(g!==-1){f[g]="";f[g+1]="";f[g+2]="";f[g+3]="";b.setAttribute("style",f.join(""))}}}return this},append:function(a){if(!a){a=this.options.appendTo}if(!d.element(a)){throw new Error("append function must be called with element parameter being of type Element or an Element must be given in the constructor options")}if(a){a.appendChild(this.container)}return this},destroy:function(){h(this.inputEl,"input",this.inputHandler);this.container.parentNode.removeChild(this.container);this.container=null;this.stripes=null;this.inputEl=null;this.options=null},inputHandler:function(a){var b=a.target.value,c="",d=[];if(b){c=this.toHash(b);d=this.split(c,6,this.options.stripes);this.fillColors(this.stripes,d)}else{this.clearColors(this.stripes)}if(this.options.onInput){this.options.onInput.call(this,d)}}};if(typeof define==="function"&&define.amd){define("VisualHash",[],function(){return j})}else if(typeof module!=="undefined"&&typeof exports!=="undefined"&&module.exports){module.exports=j}else{a.VisualHash=j}return j})(window,document);